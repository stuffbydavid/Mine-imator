/*
	NOTE:
	This file was autogenerated by CppGen, changes may be overwritten and forever lost!
	Modify at your own risk!
	
	[ Generated on 2023.08.25 12:18:13 ]
*/

#include "Scripts.hpp"

namespace CppProject
{
	RealType action_background_ground_tex_material(ScopeAny self, IntType res)
	{
		StringType fn;
		fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image_pack();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_BLOCK_SHEET);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_background_ground_tex_material, fn, sVar(background_ground_tex_material), res);
			}
		
		
		idInt(sVar(background_ground_tex_material), count)--;
		sVar(background_ground_tex_material) = res;
		idInt(sVar(background_ground_tex_material), count)++;
		background_ground_update_texture_material(self);
		return 0.0;
	}
	
	RealType action_background_ground_tex_normal(ScopeAny self, IntType res)
	{
		StringType fn;
		fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image_pack();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_BLOCK_SHEET);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_background_ground_tex_normal, fn, sVar(background_ground_tex_normal), res);
			}
		
		
		idInt(sVar(background_ground_tex_normal), count)--;
		sVar(background_ground_tex_normal) = res;
		idInt(sVar(background_ground_tex_normal), count)++;
		background_ground_update_texture_normal(self);
		return 0.0;
	}
	
	RealType action_background_image(ScopeAny self, IntType res)
	{
		StringType fn;
		fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_TEXTURE);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_background_image, fn, sVar(background_image), res);
			}
		
		
		if (sVar(background_image) != null_)
			idInt(sVar(background_image), count)--;
		sVar(background_image) = res;
		if (sVar(background_image) != null_)
			idInt(sVar(background_image), count)++;
		return 0.0;
	}
	
	void action_background_image_box_mapped(ScopeAny self, VarType mapped)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
			history_set_var(self, ID_action_background_image_box_mapped, sVar(background_image_box_mapped), mapped, false);
		sVar(background_image_box_mapped) = mapped;
	}
	
	RealType action_background_image_rotation(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_image_rotation, true);
				tl_value_set(self, { e_value_BG_IMAGE_ROTATION, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_image_rotation, sVar(background_image_rotation), sVar(background_image_rotation) * add + val, true);
		}
		sVar(background_image_rotation) = sVar(background_image_rotation) * add + val;
		return 0.0;
	}
	
	void action_background_image_save_map()
	{
		StringType fn = file_dialog_save_image(/*"cube"*/ STR(3));
		if (fn != /*""*/ STR(0))
			sprite_save_lib(ID_spr_map_cube, IntType(0), fn);
	}
	
	RealType action_background_image_show(ScopeAny self, VarType show)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_image_show, true);
				tl_value_set(self, { e_value_BG_IMAGE_SHOW, show, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_image_show, sVar(background_image_show), show, false);
		}
		sVar(background_image_show) = show;
		return 0.0;
	}
	
	void action_background_image_stretch(ScopeAny self, VarType stretch)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
			history_set_var(self, ID_action_background_image_stretch, sVar(background_image_stretch), stretch, false);
		sVar(background_image_stretch) = stretch;
	}
	
	void action_background_image_type(ScopeAny self, VarType type)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
			history_set_var(self, ID_action_background_image_type, sVar(background_image_type), type, false);
		sVar(background_image_type) = type;
	}
	
	RealType action_background_leaves_acacia_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_leaves_acacia_color, true);
				tl_value_set(self, { e_value_BG_LEAVES_ACACIA_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_leaves_acacia_color, sVar(background_leaves_acacia_color), color, true);
		}
		sVar(background_leaves_acacia_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_leaves_birch_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_leaves_birch_color, true);
				tl_value_set(self, { e_value_BG_LEAVES_BIRCH_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_leaves_birch_color, sVar(background_leaves_birch_color), color, true);
		}
		sVar(background_leaves_birch_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_leaves_dark_oak_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_leaves_dark_oak_color, true);
				tl_value_set(self, { e_value_BG_LEAVES_DARK_OAK_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_leaves_dark_oak_color, sVar(background_leaves_dark_oak_color), color, true);
		}
		sVar(background_leaves_dark_oak_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_leaves_jungle_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_leaves_jungle_color, true);
				tl_value_set(self, { e_value_BG_LEAVES_JUNGLE_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_leaves_jungle_color, sVar(background_leaves_jungle_color), color, true);
		}
		sVar(background_leaves_jungle_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_leaves_mangrove_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_leaves_mangrove_color, true);
				tl_value_set(self, { e_value_BG_LEAVES_MANGROVE_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_leaves_mangrove_color, sVar(background_leaves_mangrove_color), color, true);
		}
		sVar(background_leaves_mangrove_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_leaves_oak_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_leaves_oak_color, true);
				tl_value_set(self, { e_value_BG_LEAVES_OAK_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_leaves_oak_color, sVar(background_leaves_oak_color), color, true);
		}
		sVar(background_leaves_oak_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_leaves_spruce_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_leaves_spruce_color, true);
				tl_value_set(self, { e_value_BG_LEAVES_SPRUCE_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_leaves_spruce_color, sVar(background_leaves_spruce_color), color, true);
		}
		sVar(background_leaves_spruce_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_night_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_night_color, true);
				tl_value_set(self, { e_value_BG_NIGHT_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_night_color, sVar(background_night_color), color, true);
		}
		sVar(background_night_color) = color;
		return 0.0;
	}
	
	RealType action_background_sky_clouds_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_clouds_color, true);
				tl_value_set(self, { e_value_BG_SKY_CLOUDS_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_clouds_color, sVar(background_sky_clouds_color), color, true);
		}
		sVar(background_sky_clouds_color) = color;
		return 0.0;
	}
	
	RealType action_background_sky_clouds_height(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_clouds_height, true);
				tl_value_set(self, { e_value_BG_SKY_CLOUDS_HEIGHT, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_clouds_height, sVar(background_sky_clouds_height), sVar(background_sky_clouds_height) * add + val, true);
		}
		sVar(background_sky_clouds_height) = sVar(background_sky_clouds_height) * add + val;
		return 0.0;
	}
	
	void action_background_sky_clouds_mode(ScopeAny self, VarType mode)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
			history_set_var(self, ID_action_background_sky_clouds_mode, sVar(background_sky_clouds_mode), mode, false);
		sVar(background_sky_clouds_mode) = mode;
		background_sky_update_clouds(self);
	}
	
	RealType action_background_sky_clouds_offset(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_clouds_offset, true);
				tl_value_set(self, { e_value_BG_SKY_CLOUDS_OFFSET, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_clouds_offset, sVar(background_sky_clouds_offset), sVar(background_sky_clouds_offset) * add + val, IntType(1));
		}
		sVar(background_sky_clouds_offset) = sVar(background_sky_clouds_offset) * add + val;
		return 0.0;
	}
	
	RealType action_background_sky_clouds_show(ScopeAny self, VarType show)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_clouds_show, true);
				tl_value_set(self, { e_value_BG_SKY_CLOUDS_SHOW, show, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_clouds_show, sVar(background_sky_clouds_show), show, false);
		}
		sVar(background_sky_clouds_show) = show;
		return 0.0;
	}
	
	void action_background_sky_clouds_size(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
			history_set_var(self, ID_action_background_sky_clouds_size, sVar(background_sky_clouds_size), sVar(background_sky_clouds_size) * add + val, true);
		sVar(background_sky_clouds_size) = sVar(background_sky_clouds_size) * add + val;
		background_sky_update_clouds(self);
	}
	
	RealType action_background_sky_clouds_speed(ScopeAny self, RealType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_clouds_speed, true);
				tl_value_set(self, { e_value_BG_SKY_CLOUDS_SPEED, val / 100.0, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_clouds_speed, sVar(background_sky_clouds_speed), sVar(background_sky_clouds_speed) * add + val / 100.0, true);
		}
		else
			val *= 100.0;
		
		sVar(background_sky_clouds_speed) = sVar(background_sky_clouds_speed) * add + val / 100.0;
		return 0.0;
	}
	
	RealType action_background_sky_clouds_tex(ScopeAny self, IntType res)
	{
		StringType fn;
		fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image_pack();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_TEXTURE);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_background_sky_clouds_tex, fn, sVar(background_sky_clouds_tex), res);
			}
		
		
		idInt(sVar(background_sky_clouds_tex), count)--;
		sVar(background_sky_clouds_tex) = res;
		idInt(sVar(background_sky_clouds_tex), count)++;
		background_sky_update_clouds(self);
		return 0.0;
	}
	
	void action_background_sky_clouds_thickness(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
			history_set_var(self, ID_action_background_sky_clouds_thickness, sVar(background_sky_clouds_thickness), sVar(background_sky_clouds_thickness) * add + val, IntType(1));
		sVar(background_sky_clouds_thickness) = sVar(background_sky_clouds_thickness) * add + val;
		background_sky_update_clouds(self);
	}
	
	RealType action_background_sky_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_color, true);
				tl_value_set(self, { e_value_BG_SKY_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_color, sVar(background_sky_color), color, true);
		}
		sVar(background_sky_color) = color;
		return 0.0;
	}
	
	RealType action_background_sky_moon_angle(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_moon_angle, true);
				tl_value_set(self, { e_value_BG_SKY_MOON_ANGLE, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_moon_angle, sVar(background_sky_moon_angle), sVar(background_sky_moon_angle) * add + val, true);
		}
		sVar(background_sky_moon_angle) = sVar(background_sky_moon_angle) * add + val;
		return 0.0;
	}
	
	RealType action_background_sky_moon_phase(ScopeAny self, VarType phase)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_moon_phase, false);
				tl_value_set(self, { e_value_BG_SKY_MOON_PHASE, phase, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_moon_phase, sVar(background_sky_moon_phase), phase, true);
		}
		sVar(background_sky_moon_phase) = phase;
		return 0.0;
	}
	
	RealType action_background_sky_moon_scale(ScopeAny self, RealType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_moon_scale, true);
				tl_value_set(self, { e_value_BG_SKY_MOON_SCALE, val / 100.0, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_moon_scale, sVar(background_sky_moon_scale), sVar(background_sky_moon_scale) * add + val / 100.0, true);
		}
		else
			val *= 100.0;
		
		sVar(background_sky_moon_scale) = sVar(background_sky_moon_scale) * add + val / 100.0;
		return 0.0;
	}
	
	RealType action_background_sky_moon_tex(ScopeAny self, IntType res)
	{
		StringType fn;
		fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image_pack();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_TEXTURE);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_background_sky_moon_tex, fn, sVar(background_sky_moon_tex), res);
			}
		
		
		idInt(sVar(background_sky_moon_tex), count)--;
		sVar(background_sky_moon_tex) = res;
		idInt(sVar(background_sky_moon_tex), count)++;
		return 0.0;
	}
	
	RealType action_background_sky_rotation(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_rotation, true);
				tl_value_set(self, { e_value_BG_SKY_ROTATION, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_rotation, sVar(background_sky_rotation), sVar(background_sky_rotation) * add + val, true);
		}
		sVar(background_sky_rotation) = sVar(background_sky_rotation) * add + val;
		return 0.0;
	}
	
	RealType action_background_sky_sun_angle(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_sun_angle, true);
				tl_value_set(self, { e_value_BG_SKY_SUN_ANGLE, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_sun_angle, sVar(background_sky_sun_angle), sVar(background_sky_sun_angle) * add + val, true);
		}
		sVar(background_sky_sun_angle) = sVar(background_sky_sun_angle) * add + val;
		return 0.0;
	}
	
	RealType action_background_sky_sun_scale(ScopeAny self, RealType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_sun_scale, true);
				tl_value_set(self, { e_value_BG_SKY_SUN_SCALE, val / 100.0, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_sun_scale, sVar(background_sky_sun_scale), sVar(background_sky_sun_scale) * add + val / 100.0, true);
		}
		else
			val *= 100.0;
		
		sVar(background_sky_sun_scale) = sVar(background_sky_sun_scale) * add + val / 100.0;
		return 0.0;
	}
	
	RealType action_background_sky_sun_tex(ScopeAny self, IntType res)
	{
		StringType fn;
		fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image_pack();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_TEXTURE);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_background_sky_sun_tex, fn, sVar(background_sky_sun_tex), res);
			}
		
		
		idInt(sVar(background_sky_sun_tex), count)--;
		sVar(background_sky_sun_tex) = res;
		idInt(sVar(background_sky_sun_tex), count)++;
		return 0.0;
	}
	
	RealType action_background_sky_time(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sky_time, true);
				tl_value_set(self, { e_value_BG_SKY_TIME, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sky_time, sVar(background_sky_time), sVar(background_sky_time) * add + val, true);
		}
		sVar(background_sky_time) = sVar(background_sky_time) * add + val;
		return 0.0;
	}
	
	RealType action_background_sunlight_angle(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sunlight_angle, true);
				tl_value_set(self, { e_value_BG_SUNLIGHT_ANGLE, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sunlight_angle, sVar(background_sunlight_angle), sVar(background_sunlight_angle) * add + val, true);
		}
		sVar(background_sunlight_angle) = sVar(background_sunlight_angle) * add + val;
		return 0.0;
	}
	
	RealType action_background_sunlight_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sunlight_color, true);
				tl_value_set(self, { e_value_BG_SUNLIGHT_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sunlight_color, sVar(background_sunlight_color), color, true);
		}
		sVar(background_sunlight_color) = color;
		return 0.0;
	}
	
	RealType action_background_sunlight_strength(ScopeAny self, RealType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_sunlight_strength, true);
				tl_value_set(self, { e_value_BG_SUNLIGHT_STRENGTH, val / 100.0, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_sunlight_strength, sVar(background_sunlight_strength), sVar(background_sunlight_strength) * add + val / 100.0, true);
		}
		else
			val *= 100.0;
		
		sVar(background_sunlight_strength) = sVar(background_sunlight_strength) * add + val / 100.0;
		if (sVar(background_sunlight_strength) == IntType(0))
			sVar(background_sunlight_strength) = IntType(0);
		return 0.0;
	}
	
	RealType action_background_texture_animation_speed(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_texture_animation_speed, true);
				tl_value_set(self, { e_value_BG_TEXTURE_ANI_SPEED, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_texture_animation_speed, sVar(background_texture_animation_speed), sVar(background_texture_animation_speed) * add + val, true);
		}
		sVar(background_texture_animation_speed) = sVar(background_texture_animation_speed) * add + val;
		return 0.0;
	}
	
	RealType action_background_twilight(ScopeAny self, VarType twilight)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_twilight, true);
				tl_value_set(self, { e_value_BG_TWILIGHT, twilight, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_twilight, sVar(background_twilight), twilight, false);
		}
		sVar(background_twilight) = twilight;
		return 0.0;
	}
	
	RealType action_background_water_color(ScopeAny self, VarType color)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_water_color, true);
				tl_value_set(self, { e_value_BG_WATER_COLOR, color, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_water_color, sVar(background_water_color), color, true);
		}
		sVar(background_water_color) = color;
		withAll (obj_resource, self->id)
			res_update_colors(ScopeAny(self));
		
		ObjType(obj_preview, ObjType(obj_category, ObjType(obj_tab, sInt(properties))->library)->preview)->update = true;
		return 0.0;
	}
	
	RealType action_background_wind(ScopeAny self, VarType wind)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_wind, true);
				tl_value_set(self, { e_value_BG_WIND, wind, false });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_wind, sVar(background_wind), wind, false);
		}
		sVar(background_wind) = wind;
		return 0.0;
	}
	
	RealType action_background_wind_direction(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_wind_direction, true);
				tl_value_set(self, { e_value_BG_WIND_DIRECTION, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_wind_direction, sVar(background_wind_direction), sVar(background_wind_direction) * add + val, true);
		}
		sVar(background_wind_direction) = sVar(background_wind_direction) * add + val;
		return 0.0;
	}
	
	RealType action_background_wind_directional_speed(ScopeAny self, RealType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_wind_directional_speed, true);
				tl_value_set(self, { e_value_BG_WIND_DIRECTIONAL_SPEED, val / 100.0, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_wind_directional_speed, sVar(background_wind_directional_speed), sVar(background_wind_directional_speed) * add + val / 100.0, true);
		}
		else
			val *= 100.0;
		
		sVar(background_wind_directional_speed) = sVar(background_wind_directional_speed) * add + val / 100.0;
		return 0.0;
	}
	
	RealType action_background_wind_directional_strength(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_wind_directional_strength, true);
				tl_value_set(self, { e_value_BG_WIND_DIRECTIONAL_STRENGTH, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_wind_directional_strength, sVar(background_wind_directional_strength), sVar(background_wind_directional_strength) * add + val, true);
		}
		sVar(background_wind_directional_strength) = sVar(background_wind_directional_strength) * add + val;
		return 0.0;
	}
	
	RealType action_background_wind_speed(ScopeAny self, RealType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_wind_speed, true);
				tl_value_set(self, { e_value_BG_WIND_SPEED, val / 100.0, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_wind_speed, sVar(background_wind_speed), sVar(background_wind_speed) * add + val / 100.0, true);
		}
		else
			val *= 100.0;
		
		sVar(background_wind_speed) = sVar(background_wind_speed) * add + val / 100.0;
		return 0.0;
	}
	
	RealType action_background_wind_strength(ScopeAny self, VarType val, VarType add)
	{
		if (!(sReal(history_undo) > 0) && !(sReal(history_redo) > 0))
		{
			if (action_tl_select_single(self, { null_, e_tl_type_BACKGROUND }))
			{
				tl_value_set_start(self, ID_action_background_wind_strength, true);
				tl_value_set(self, { e_value_BG_WIND_STRENGTH, val, add });
				tl_value_set_done();
				return IntType(0);
			}
			history_set_var(self, ID_action_background_wind_strength, sVar(background_wind_strength), sVar(background_wind_strength) * add + val, true);
		}
		sVar(background_wind_strength) = sVar(background_wind_strength) * add + val;
		return 0.0;
	}
	
	RealType action_bench_block_name(ScopeAny self, VarType block)
	{
		withOne (obj_bench_settings, sInt(bench_settings), self->id)
		{
			StringType s = string_lower(ObjType(obj_textbox, ObjType(obj_sortlist, self->block_list)->search_tbx)->text);
			if (self->block_name == block && s == /*""*/ STR(0))
				return IntType(0);
			self->block_name = block;
			self->block_state = array_copy_1d(ObjType(obj_block, DsMap(ObjType(obj_minecraft_assets, global::mc_assets)->block_name_map).Value(sVar(block_name)))->default_state);
			if (s != /*""*/ STR(0) && !string_contains(string_lower(minecraft_asset_get_name(/*"block"*/ STR(4), ObjType(obj_block, DsMap(ObjType(obj_minecraft_assets, global::mc_assets)->block_name_map).Value(block))->name)), s))
			{
				VarType b, state, val;
				b = DsMap(ObjType(obj_minecraft_assets, global::mc_assets)->block_name_map).Value(block);
				for (IntType i = IntType(0); i < array_length(VarType::CreateRef(self->block_state)); i += IntType(2))
				{
					VarType state = self->block_state.Value(i);
					IntType statelist = DsMap(ObjType(obj_block, b)->states_map).Value(state);
					for (IntType j = IntType(0); j < idReal(statelist, value_amount); j++)
					{
						val = idVar(statelist, value_name).Value(j);
						if (string_contains(string_lower(minecraft_asset_get_name(/*"blockstatevalue"*/ STR(5), val)), s))
						{
							state_vars_set_value(VarType::CreateRef(self->block_state), state, val);
							break;
						}
					}
				}
			}
			temp_update_block(ScopeAny(self));
			ObjType(obj_preview, self->preview)->update = true;
		}
		
		return 0.0;
	}
	
	RealType action_bench_block_state(ScopeAny self, StringType val)
	{
		VarType state;
		state = idVar(sInt(menu_block_state), name);
		withOne (obj_bench_settings, sInt(bench_settings), global::_app->id)
		{
			if (state_vars_get_value(self->block_state, state) == val)
				return IntType(0);
			state_vars_set_value(VarType::CreateRef(self->block_state), state, val);
			temp_update_block(ScopeAny(self));
			ObjType(obj_preview, self->preview)->update = true;
		}
		
		return 0.0;
	}
	
	RealType action_bench_block_tex(ScopeAny self, IntType res)
	{
		StringType fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image_pack();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_BLOCK_SHEET);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_bench_block_tex, fn, ObjType(obj_bench_settings, sInt(bench_settings))->block_tex, res);
			}
		
		
		ObjType(obj_bench_settings, sInt(bench_settings))->block_tex = res;
		ObjType(obj_preview, ObjType(obj_bench_settings, sInt(bench_settings))->preview)->update = true;
		return 0.0;
	}
	
	RealType action_bench_block_tex_material(ScopeAny self, IntType res)
	{
		StringType fn = /*""*/ STR(0);
		if (sReal(history_undo) > 0)
			res = history_undo_res();
		else
			if (sReal(history_redo) > 0)
				res = history_redo_res(self);
			else
			{
				if (res == e_option_BROWSE)
				{
					fn = file_dialog_open_image_pack();
					if (!file_exists_lib(fn))
						return IntType(0);
					res = new_res(self, fn, e_res_type_BLOCK_SHEET);
					withOne (Object, res, self->id)
						res_load(self);
					
				}
				history_set_res(self, ID_action_bench_block_tex_material, fn, ObjType(obj_bench_settings, sInt(bench_settings))->block_tex_material, res);
			}
		
		
		ObjType(obj_bench_settings, sInt(bench_settings))->block_tex_material = res;
		ObjType(obj_preview, ObjType(obj_bench_settings, sInt(bench_settings))->preview)->update = true;
		return 0.0;
	}
	
}
