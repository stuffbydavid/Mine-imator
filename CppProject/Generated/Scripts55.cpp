/*
	NOTE:
	This file was autogenerated by CppGen, changes may be overwritten and forever lost!
	Modify at your own risk!
	
	[ Generated on 2023.03.04 18:21:23 ]
*/

#include "Scripts.hpp"

namespace CppProject
{
	void shader_material_uniforms(Scope<obj_shader> self)
	{
		new_shader_uniform(self, /*"uDefaultEmissive"*/ STR(2780));
		new_shader_uniform(self, /*"uDefaultSubsurface"*/ STR(2781));
		new_shader_sampler(self, /*"uTextureMaterial"*/ STR(2782));
		new_shader_sampler(self, /*"uTextureNormal"*/ STR(2783));
		new_shader_uniform(self, /*"uMaterialFormat"*/ STR(2453));
		new_shader_uniform(self, /*"uRoughness"*/ STR(2457));
		new_shader_uniform(self, /*"uMetallic"*/ STR(2456));
		new_shader_uniform(self, /*"uEmissive"*/ STR(2458));
		new_shader_uniform(self, /*"uSSS"*/ STR(2466));
		new_shader_uniform(self, /*"uSSSRadius"*/ STR(2467));
		new_shader_uniform(self, /*"uSSSColor"*/ STR(2468));
		new_shader_uniform(self, /*"uSSSHighlight"*/ STR(2784));
		new_shader_uniform(self, /*"uSSSHighlightStrength"*/ STR(2785));
		new_shader_uniform(self, /*"uIsWater"*/ STR(2459));
	}
	
	void shader_noise_set(ScopeAny self)
	{
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2725)), surface_get_texture((IntType)(global::render_grain_noise)));
		gpu_set_texrepeat_ext(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2725)), true);
		gpu_set_tex_filter_ext(DsMap(sInt(sampler_map)).Value(/*"uNoiseBuffer"*/ STR(2725)), true);
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2677), global::render_width, global::render_height);
		render_set_uniform(/*"uStrength"*/ STR(2786), idVar(global::render_camera, value).Value(e_value_CAM_GRAIN_STRENGTH));
		render_set_uniform(/*"uSaturation"*/ STR(2690), idVar(global::render_camera, value).Value(e_value_CAM_GRAIN_SATURATION));
		render_set_uniform(/*"uSize"*/ STR(2787), vec2_mul(vec2(max({ ceil((RealType)global::render_width / 8.0), ceil((RealType)global::render_height / 8.0) })), idVar(global::render_camera, value).Value(e_value_CAM_GRAIN_SIZE)));
	}
	
	void shader_reset_uniforms()
	{
		global::shader_uniform_color_ext = null_;
		global::shader_uniform_rgb_add = null_;
		global::shader_uniform_rgb_sub = null_;
		global::shader_uniform_hsb_add = null_;
		global::shader_uniform_hsb_sub = null_;
		global::shader_uniform_hsb_mul = null_;
		global::shader_uniform_mix_color = null_;
		global::shader_uniform_mix_percent = null_;
		global::shader_uniform_emissive = null_;
		global::shader_uniform_metallic = null_;
		global::shader_uniform_roughness = null_;
		global::shader_uniform_wind = null_;
		global::shader_uniform_wind_terrain = null_;
		global::shader_uniform_fog = null_;
		global::shader_uniform_sss = null_;
		global::shader_uniform_sss_red = null_;
		global::shader_uniform_sss_green = null_;
		global::shader_uniform_sss_blue = null_;
		global::shader_uniform_sss_color = null_;
		global::shader_uniform_wind_strength = null_;
		global::shader_uniform_glow = null_;
		global::shader_uniform_glow_texture = null_;
		global::shader_uniform_glow_color = null_;
	}
	
	void shader_set_uniform_color(VarType index, VarType color, VarType alpha)
	{
		shader_submit_vec4(index, (RealType)color_get_red((IntType)(color)) / 255.0, (RealType)color_get_green((IntType)(color)) / 255.0, (RealType)color_get_blue((IntType)(color)) / 255.0, alpha);
	}
	
	BoolType shader_startup(ScopeAny self)
	{
		global::shader_clip_x = IntType(0);
		global::shader_clip_y = IntType(0);
		global::shader_clip_width = IntType(0);
		global::shader_clip_height = IntType(0);
		global::shader_clip_active = false;
		global::shader_mask = false;
		log({ /*"Shader init"*/ STR(2788) });
		log({ /*"shaders_are_supported"*/ STR(2789), yesno(shaders_are_supported()) });
		BoolType err = false;
		if (!shaders_are_supported())
			err = true;
		global::shader_check_uniform = false;
		if (!err)
		{
			global::shader_map = ds_map_create();
			new_shader(/*"shader_alpha_fix"*/ STR(2790));
			new_shader(/*"shader_alpha_test"*/ STR(2791));
			new_shader(/*"shader_blend"*/ STR(2792));
			new_shader(/*"shader_border"*/ STR(2793));
			new_shader(/*"shader_color_camera"*/ STR(2794));
			new_shader(/*"shader_color_fog"*/ STR(2795));
			new_shader(/*"shader_color_fog_lights"*/ STR(2796));
			new_shader(/*"shader_depth"*/ STR(2797));
			new_shader(/*"shader_depth_ortho"*/ STR(2798));
			new_shader(/*"shader_depth_point"*/ STR(2799));
			new_shader(/*"shader_draw_texture"*/ STR(2800));
			new_shader(/*"shader_replace"*/ STR(2801));
			new_shader(/*"shader_replace_alpha"*/ STR(2802));
			new_shader(/*"shader_high_dof"*/ STR(2803));
			new_shader(/*"shader_high_dof_coc"*/ STR(2804));
			new_shader(/*"shader_high_dof_coc_blur"*/ STR(2805));
			new_shader(/*"shader_high_fog"*/ STR(2806));
			new_shader(/*"shader_high_fog_apply"*/ STR(2807));
			new_shader(/*"shader_high_light_point"*/ STR(2808));
			new_shader(/*"shader_high_light_point_shadowless"*/ STR(2809));
			new_shader(/*"shader_high_light_spot"*/ STR(2810));
			new_shader(/*"shader_high_light_sun"*/ STR(2811));
			new_shader(/*"shader_high_ssao"*/ STR(2812));
			new_shader(/*"shader_color_glow"*/ STR(2813));
			new_shader(/*"shader_high_bloom_threshold"*/ STR(2814));
			new_shader(/*"shader_add"*/ STR(2815));
			new_shader(/*"shader_blur"*/ STR(2816));
			new_shader(/*"shader_color_correction"*/ STR(2817));
			new_shader(/*"shader_vignette"*/ STR(2818));
			new_shader(/*"shader_noise"*/ STR(2819));
			new_shader(/*"shader_ca"*/ STR(2820));
			new_shader(/*"shader_distort"*/ STR(2821));
			new_shader(/*"shader_high_lighting_apply"*/ STR(2822));
			new_shader(/*"shader_high_samples_add"*/ STR(2823));
			new_shader(/*"shader_high_samples_unpack"*/ STR(2824));
			new_shader(/*"shader_high_depth_normal"*/ STR(2825));
			new_shader(/*"shader_high_material"*/ STR(2826));
			new_shader(/*"shader_high_subsurface"*/ STR(2827));
			new_shader(/*"shader_high_subsurface_scatter"*/ STR(2828));
			new_shader(/*"shader_high_raytrace"*/ STR(2829));
			new_shader(/*"shader_high_raytrace_resolve"*/ STR(2830));
			new_shader(/*"shader_high_indirect_blur"*/ STR(2831));
			new_shader(/*"shader_tonemap"*/ STR(2832));
			new_shader(/*"shader_clip"*/ STR(2833));
			global::shader_texture_surface = false;
			global::shader_texture_filter_linear = false;
			global::shader_texture_filter_mipmap = false;
			withAll (obj_shader, self->id)
			{
				log({ self->name + /*" compiled"*/ STR(2834), yesno(shader_is_compiled(self->shader)) });
				if (!shader_is_compiled(self->shader))
				{
					err = true;
					break;
				}
			}
			
		}
		if (err)
		{
			log({ /*"Shader compilation failed"*/ STR(2835) });
			log({ /*"Try updating your graphics drivers"*/ STR(2836), sVar(link_article_drivers) });
			if (show_question(/*"Some shaders failed to compile.\nCheck that your graphics drivers are up-to-date and restart Mine-imator.\n\nOpen support article about updating graphics drivers?"*/ STR(2837)))
				open_url(drivers_url_get());
			game_end();
			return false;
		}
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_border), self->id)
		{
			new_shader_uniform(self, /*"uTexSize"*/ STR(2682));
			new_shader_uniform(self, /*"uColor"*/ STR(2683));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_color_camera), self->id)
		{
			new_shader_uniform(self, /*"uBrightness"*/ STR(2689));
			new_shader_uniform(self, /*"uRGBAdd"*/ STR(2029));
			new_shader_uniform(self, /*"uRGBSub"*/ STR(2030));
			new_shader_uniform(self, /*"uHSBAdd"*/ STR(2031));
			new_shader_uniform(self, /*"uHSBSub"*/ STR(2032));
			new_shader_uniform(self, /*"uHSBMul"*/ STR(2033));
			new_shader_uniform(self, /*"uMixColor"*/ STR(2034));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_color_fog), self->id)
		{
			new_shader_uniform(self, /*"uColorsExt"*/ STR(2028));
			new_shader_uniform(self, /*"uRGBAdd"*/ STR(2029));
			new_shader_uniform(self, /*"uRGBSub"*/ STR(2030));
			new_shader_uniform(self, /*"uHSBAdd"*/ STR(2031));
			new_shader_uniform(self, /*"uHSBSub"*/ STR(2032));
			new_shader_uniform(self, /*"uHSBMul"*/ STR(2033));
			new_shader_uniform(self, /*"uMixColor"*/ STR(2034));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_color_fog_lights), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uIsGround"*/ STR(2461));
			new_shader_uniform(self, /*"uIsSky"*/ STR(2464));
			new_shader_uniform(self, /*"uColorsExt"*/ STR(2028));
			new_shader_uniform(self, /*"uRGBAdd"*/ STR(2029));
			new_shader_uniform(self, /*"uRGBSub"*/ STR(2030));
			new_shader_uniform(self, /*"uHSBAdd"*/ STR(2031));
			new_shader_uniform(self, /*"uHSBSub"*/ STR(2032));
			new_shader_uniform(self, /*"uHSBMul"*/ STR(2033));
			new_shader_uniform(self, /*"uMixColor"*/ STR(2034));
			new_shader_uniform(self, /*"uLightAmount"*/ STR(2694));
			new_shader_uniform(self, /*"uSunDirection"*/ STR(2693));
			new_shader_uniform(self, /*"uLightData"*/ STR(2695));
			new_shader_uniform(self, /*"uAmbientColor"*/ STR(2696));
			new_shader_uniform(self, /*"uFallbackColor"*/ STR(2697));
			new_shader_uniform(self, /*"uTonemapper"*/ STR(2698));
			new_shader_uniform(self, /*"uExposure"*/ STR(2699));
			new_shader_uniform(self, /*"uGamma"*/ STR(2700));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_depth), self->id)
		{
			new_shader_uniform(self, /*"uNear"*/ STR(2702));
			new_shader_uniform(self, /*"uFar"*/ STR(2703));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_depth_point), self->id)
		{
			new_shader_uniform(self, /*"uEye"*/ STR(2701));
			new_shader_uniform(self, /*"uNear"*/ STR(2702));
			new_shader_uniform(self, /*"uFar"*/ STR(2703));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_draw_texture), self->id)
			new_shader_uniform(self, /*"uMask"*/ STR(2731));
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_replace), self->id)
			new_shader_uniform(self, /*"uReplaceColor"*/ STR(2460));
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_replace_alpha), self->id)
			new_shader_uniform(self, /*"uReplaceColor"*/ STR(2460));
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_dof), self->id)
		{
			new_shader_sampler(self, /*"uBlurBuffer"*/ STR(2714));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uBlurSize"*/ STR(2715));
			new_shader_uniform(self, /*"uBias"*/ STR(2716));
			new_shader_uniform(self, /*"uThreshold"*/ STR(2707));
			new_shader_uniform(self, /*"uGain"*/ STR(2717));
			new_shader_uniform(self, /*"uFringe"*/ STR(2718));
			new_shader_uniform(self, /*"uFringeAngle"*/ STR(2719));
			new_shader_uniform(self, /*"uFringeStrength"*/ STR(2720));
			new_shader_uniform(self, /*"uSampleAmount"*/ STR(2721));
			new_shader_uniform(self, /*"uSamples"*/ STR(2679));
			new_shader_uniform(self, /*"uWeightSamples"*/ STR(2722));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_dof_coc), self->id)
		{
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_uniform(self, /*"uDepth"*/ STR(2711));
			new_shader_uniform(self, /*"uRange"*/ STR(2712));
			new_shader_uniform(self, /*"uFadeSize"*/ STR(2713));
			new_shader_uniform(self, /*"uNear"*/ STR(2702));
			new_shader_uniform(self, /*"uFar"*/ STR(2703));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_dof_coc_blur), self->id)
		{
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uPixelCheck"*/ STR(2709));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_fog), self->id)
		{
			new_shader_uniform(self, /*"uCameraPos"*/ STR(2838));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_fog_apply), self->id)
		{
			new_shader_sampler(self, /*"uFogBuffer"*/ STR(2723));
			new_shader_uniform(self, /*"uFogColor"*/ STR(1882));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_light_point), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uIsSky"*/ STR(2464));
			new_shader_uniform(self, /*"uLightPosition"*/ STR(2736));
			new_shader_uniform(self, /*"uLightColor"*/ STR(2737));
			new_shader_uniform(self, /*"uLightStrength"*/ STR(2738));
			new_shader_uniform(self, /*"uLightNear"*/ STR(2739));
			new_shader_uniform(self, /*"uLightFar"*/ STR(2740));
			new_shader_uniform(self, /*"uLightFadeSize"*/ STR(2741));
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_uniform(self, /*"uDepthBufferSize"*/ STR(2744));
			new_shader_uniform(self, /*"uShadowPosition"*/ STR(2742));
			new_shader_uniform(self, /*"uLightSpecular"*/ STR(2465));
			new_shader_uniform(self, /*"uLightSize"*/ STR(2743));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_light_point_shadowless), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uIsSky"*/ STR(2464));
			new_shader_uniform(self, /*"uLightAmount"*/ STR(2694));
			new_shader_uniform(self, /*"uLightData"*/ STR(2695));
			new_shader_uniform(self, /*"uLightSpecular"*/ STR(2465));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_light_spot), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uIsSky"*/ STR(2464));
			new_shader_uniform(self, /*"uLightMatrix"*/ STR(2745));
			new_shader_uniform(self, /*"uShadowMatrix"*/ STR(2746));
			new_shader_uniform(self, /*"uLightPosition"*/ STR(2736));
			new_shader_uniform(self, /*"uLightColor"*/ STR(2737));
			new_shader_uniform(self, /*"uLightStrength"*/ STR(2738));
			new_shader_uniform(self, /*"uLightNear"*/ STR(2739));
			new_shader_uniform(self, /*"uLightFar"*/ STR(2740));
			new_shader_uniform(self, /*"uLightFadeSize"*/ STR(2741));
			new_shader_uniform(self, /*"uLightSpotSharpness"*/ STR(2747));
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_uniform(self, /*"uLightSpecular"*/ STR(2465));
			new_shader_uniform(self, /*"uLightSize"*/ STR(2743));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_light_sun), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uIsSky"*/ STR(2464));
			new_shader_uniform(self, /*"uLightDirection"*/ STR(2751));
			new_shader_uniform(self, /*"uLightColor"*/ STR(2737));
			new_shader_uniform(self, /*"uLightStrength"*/ STR(2738));
			new_shader_uniform(self, /*"uSunNear"*/ STR(2749));
			new_shader_uniform(self, /*"uSunFar"*/ STR(2750));
			new_shader_sampler(self, /*"uDepthBuffer0"*/ STR(2752));
			new_shader_sampler(self, /*"uDepthBuffer1"*/ STR(2753));
			new_shader_sampler(self, /*"uDepthBuffer2"*/ STR(2754));
			new_shader_uniform(self, /*"uLightSpecular"*/ STR(2465));
			new_shader_uniform(self, /*"uLightMatBiasMVP"*/ STR(2748));
			new_shader_uniform(self, /*"uCascadeEndClipSpace"*/ STR(2755));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_ssao), self->id)
		{
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_sampler(self, /*"uNormalBuffer"*/ STR(2724));
			new_shader_sampler(self, /*"uEmissiveBuffer"*/ STR(2775));
			new_shader_sampler(self, /*"uNoiseBuffer"*/ STR(2725));
			new_shader_sampler(self, /*"uMaskBuffer"*/ STR(2776));
			new_shader_uniform(self, /*"uNormalBufferScale"*/ STR(2708));
			new_shader_uniform(self, /*"uNear"*/ STR(2702));
			new_shader_uniform(self, /*"uFar"*/ STR(2703));
			new_shader_uniform(self, /*"uProjMatrix"*/ STR(2763));
			new_shader_uniform(self, /*"uProjMatrixInv"*/ STR(2764));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uNoiseSize"*/ STR(2726));
			new_shader_uniform(self, /*"uKernel"*/ STR(2678));
			new_shader_uniform(self, /*"uRadius"*/ STR(2680));
			new_shader_uniform(self, /*"uPower"*/ STR(2676));
			new_shader_uniform(self, /*"uColor"*/ STR(2683));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_color_glow), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uColorsExt"*/ STR(2028));
			new_shader_uniform(self, /*"uRGBAdd"*/ STR(2029));
			new_shader_uniform(self, /*"uRGBSub"*/ STR(2030));
			new_shader_uniform(self, /*"uHSBAdd"*/ STR(2031));
			new_shader_uniform(self, /*"uHSBSub"*/ STR(2032));
			new_shader_uniform(self, /*"uHSBMul"*/ STR(2033));
			new_shader_uniform(self, /*"uMixColor"*/ STR(2034));
			new_shader_uniform(self, /*"uGlow"*/ STR(2469));
			new_shader_uniform(self, /*"uGlowTexture"*/ STR(2463));
			new_shader_uniform(self, /*"uGlowColor"*/ STR(2462));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_bloom_threshold), self->id)
		{
			new_shader_uniform(self, /*"uThreshold"*/ STR(2707));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_add), self->id)
		{
			new_shader_sampler(self, /*"uAddTexture"*/ STR(2674));
			new_shader_uniform(self, /*"uAmount"*/ STR(2675));
			new_shader_uniform(self, /*"uPower"*/ STR(2676));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_blur), self->id)
		{
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uRadius"*/ STR(2680));
			new_shader_uniform(self, /*"uDirection"*/ STR(2681));
			new_shader_uniform(self, /*"uKernel"*/ STR(2678));
			new_shader_uniform(self, /*"uSamples"*/ STR(2679));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_color_correction), self->id)
		{
			new_shader_uniform(self, /*"uContrast"*/ STR(2688));
			new_shader_uniform(self, /*"uBrightness"*/ STR(2689));
			new_shader_uniform(self, /*"uSaturation"*/ STR(2690));
			new_shader_uniform(self, /*"uVibrance"*/ STR(2691));
			new_shader_uniform(self, /*"uColorBurn"*/ STR(2692));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_vignette), self->id)
		{
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uRadius"*/ STR(2680));
			new_shader_uniform(self, /*"uSoftness"*/ STR(2839));
			new_shader_uniform(self, /*"uStrength"*/ STR(2786));
			new_shader_uniform(self, /*"uColor"*/ STR(2683));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_noise), self->id)
		{
			new_shader_sampler(self, /*"uNoiseBuffer"*/ STR(2725));
			new_shader_uniform(self, /*"uNoiseSize"*/ STR(2726));
			new_shader_uniform(self, /*"uStrength"*/ STR(2786));
			new_shader_uniform(self, /*"uSaturation"*/ STR(2690));
			new_shader_uniform(self, /*"uSize"*/ STR(2787));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_ca), self->id)
		{
			new_shader_uniform(self, /*"uBlurAmount"*/ STR(2684));
			new_shader_uniform(self, /*"uColorOffset"*/ STR(2685));
			new_shader_uniform(self, /*"uDistortChannels"*/ STR(2686));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_distort), self->id)
		{
			new_shader_uniform(self, /*"uDistortAmount"*/ STR(2704));
			new_shader_uniform(self, /*"uRepeatImage"*/ STR(2705));
			new_shader_uniform(self, /*"uZoomAmount"*/ STR(2706));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_lighting_apply), self->id)
		{
			new_shader_sampler(self, /*"uShadows"*/ STR(2728));
			new_shader_sampler(self, /*"uSpecular"*/ STR(2730));
			new_shader_sampler(self, /*"uMask"*/ STR(2731));
			new_shader_sampler(self, /*"uEmissive"*/ STR(2458));
			new_shader_sampler(self, /*"uMaterialBuffer"*/ STR(2732));
			new_shader_uniform(self, /*"uShadowsEnabled"*/ STR(2727));
			new_shader_uniform(self, /*"uSpecularEnabled"*/ STR(2729));
			new_shader_uniform(self, /*"uReflectionsEnabled"*/ STR(2735));
			new_shader_uniform(self, /*"uFallbackColor"*/ STR(2697));
			new_shader_uniform(self, /*"uGamma"*/ STR(2700));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_samples_add), self->id)
		{
			new_shader_sampler(self, /*"uSamplesExp"*/ STR(2769));
			new_shader_sampler(self, /*"uSamplesDec"*/ STR(2770));
			new_shader_sampler(self, /*"uSamplesAlpha"*/ STR(2771));
			new_shader_sampler(self, /*"uSample"*/ STR(2772));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_samples_unpack), self->id)
		{
			new_shader_sampler(self, /*"uSamplesExp"*/ STR(2769));
			new_shader_sampler(self, /*"uSamplesDec"*/ STR(2770));
			new_shader_sampler(self, /*"uSamplesAlpha"*/ STR(2771));
			new_shader_uniform(self, /*"uSamplesStrength"*/ STR(2773));
			new_shader_uniform(self, /*"uRenderBackground"*/ STR(2774));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_depth_normal), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uNormalBufferScale"*/ STR(2708));
			new_shader_uniform(self, /*"uNear"*/ STR(2702));
			new_shader_uniform(self, /*"uFar"*/ STR(2703));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_material), self->id)
		{
			shader_material_uniforms(self);
			new_shader_uniform(self, /*"uIsSky"*/ STR(2464));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_subsurface), self->id)
		{
			shader_material_uniforms(self);
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_subsurface_scatter), self->id)
		{
			new_shader_sampler(self, /*"uSSSBuffer"*/ STR(2777));
			new_shader_sampler(self, /*"uSSSRangeBuffer"*/ STR(2778));
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_sampler(self, /*"uDirect"*/ STR(2779));
			new_shader_sampler(self, /*"uNoiseBuffer"*/ STR(2725));
			new_shader_uniform(self, /*"uProjMatrix"*/ STR(2763));
			new_shader_uniform(self, /*"uProjMatrixInv"*/ STR(2764));
			new_shader_uniform(self, /*"uNear"*/ STR(2702));
			new_shader_uniform(self, /*"uFar"*/ STR(2703));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uSamples"*/ STR(2679));
			new_shader_uniform(self, /*"uKernel"*/ STR(2678));
			new_shader_uniform(self, /*"uNoiseSize"*/ STR(2726));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_raytrace), self->id)
		{
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_sampler(self, /*"uNormalBuffer"*/ STR(2724));
			new_shader_sampler(self, /*"uNoiseBuffer"*/ STR(2725));
			new_shader_sampler(self, /*"uMaterialBuffer"*/ STR(2732));
			new_shader_sampler(self, /*"uDiffuseBuffer"*/ STR(2757));
			new_shader_sampler(self, /*"uDataBuffer"*/ STR(2762));
			new_shader_uniform(self, /*"uNormalBufferScale"*/ STR(2708));
			new_shader_uniform(self, /*"uNoiseSize"*/ STR(2726));
			new_shader_uniform(self, /*"uNear"*/ STR(2702));
			new_shader_uniform(self, /*"uFar"*/ STR(2703));
			new_shader_uniform(self, /*"uProjMatrix"*/ STR(2763));
			new_shader_uniform(self, /*"uProjMatrixInv"*/ STR(2764));
			new_shader_uniform(self, /*"uViewMatrixInv"*/ STR(2765));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uPrecision"*/ STR(2759));
			new_shader_uniform(self, /*"uThickness"*/ STR(2760));
			new_shader_uniform(self, /*"uRayType"*/ STR(2758));
			new_shader_uniform(self, /*"uRayDirection"*/ STR(2840));
			new_shader_uniform(self, /*"uRayDistance"*/ STR(2761));
			new_shader_uniform(self, /*"uFadeAmount"*/ STR(2767));
			new_shader_uniform(self, /*"uGamma"*/ STR(2700));
			new_shader_uniform(self, /*"uSkyColor"*/ STR(2766));
			new_shader_uniform(self, /*"uFogColor"*/ STR(1882));
			new_shader_uniform(self, /*"uIndirectStength"*/ STR(2768));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_indirect_blur), self->id)
		{
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_sampler(self, /*"uNormalBuffer"*/ STR(2724));
			new_shader_sampler(self, /*"uNoiseBuffer"*/ STR(2725));
			new_shader_uniform(self, /*"uNormalBufferScale"*/ STR(2708));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
			new_shader_uniform(self, /*"uNoiseSize"*/ STR(2726));
			new_shader_uniform(self, /*"uSamples"*/ STR(2679));
			new_shader_uniform(self, /*"uBlurSize"*/ STR(2715));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_high_raytrace_resolve), self->id)
		{
			new_shader_sampler(self, /*"uDataBuffer"*/ STR(2762));
			new_shader_sampler(self, /*"uDepthBuffer"*/ STR(2710));
			new_shader_sampler(self, /*"uNormalBuffer"*/ STR(2724));
			new_shader_sampler(self, /*"uMaterialBuffer"*/ STR(2732));
			new_shader_uniform(self, /*"uNormalBufferScale"*/ STR(2708));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_tonemap), self->id)
		{
			new_shader_sampler(self, /*"uMask"*/ STR(2731));
			new_shader_uniform(self, /*"uTonemapper"*/ STR(2698));
			new_shader_uniform(self, /*"uExposure"*/ STR(2699));
			new_shader_uniform(self, /*"uGamma"*/ STR(2700));
		}
		
		withOne (obj_shader, DsMap(global::shader_map).Value(ID_shader_clip), self->id)
		{
			new_shader_uniform(self, /*"uBox"*/ STR(2687));
			new_shader_uniform(self, /*"uScreenSize"*/ STR(2677));
		}
		
		return true;
	}
	
	void shader_tonemap_set(ScopeAny self, VarType mask)
	{
		render_set_uniform_int(/*"uTonemapper"*/ STR(2698), global::render_tonemapper);
		render_set_uniform(/*"uExposure"*/ STR(2699), global::render_exposure);
		render_set_uniform(/*"uGamma"*/ STR(2700), global::render_gamma);
		texture_set_stage(DsMap(sInt(sampler_map)).Value(/*"uMask"*/ STR(2731)), surface_get_texture((IntType)(mask)));
	}
	
	void shader_use(ScopeAny self)
	{
		shader_set(sInt(shader));
		global::shader_blend_color = c_white;
		global::shader_blend_alpha = IntType(1);
		render_set_uniform_color(/*"uBlendColor"*/ STR(1872), c_white, IntType(1));
		render_set_uniform(/*"uMetallic"*/ STR(2456), IntType(0));
		render_set_uniform(/*"uRoughness"*/ STR(2457), IntType(1));
		render_set_uniform(/*"uTAAMatrix"*/ STR(1887), global::taa_matrix);
		render_set_uniform(/*"uSampleIndex"*/ STR(1888), global::render_sample_current);
		render_set_uniform_int(/*"uAlphaHash"*/ STR(1889), global::render_alpha_hash);
		if (!is_undefined(DsMap(sInt(uniform_map)).Value(/*"uTime"*/ STR(1873))) && DsMap(sInt(uniform_map)).Value(/*"uTime"*/ STR(1873)) > -IntType(1))
		{
			render_set_uniform(/*"uTime"*/ STR(1873), global::_app->background_time);
			render_set_uniform(/*"uWindEnable"*/ STR(1874), IntType(0));
			render_set_uniform(/*"uWindTerrain"*/ STR(1875), IntType(1));
			render_set_uniform(/*"uWindSpeed"*/ STR(1876), global::_app->background_wind * global::_app->background_wind_speed);
			render_set_uniform(/*"uWindStrength"*/ STR(1877), global::_app->background_wind_strength * (IntType)global::_app->setting_wind_enable);
			render_set_uniform_vec2(/*"uWindDirection"*/ STR(1878), sin(degtorad(global::_app->background_wind_direction)), cos(degtorad(global::_app->background_wind_direction)));
			render_set_uniform(/*"uWindDirectionalSpeed"*/ STR(1879), global::_app->background_wind * global::_app->background_wind_directional_speed * .1 * global::_app->background_time);
			render_set_uniform(/*"uWindDirectionalStrength"*/ STR(1880), global::_app->background_wind * global::_app->background_wind_directional_strength * (IntType)global::_app->setting_wind_enable);
		}
		if (!is_undefined(DsMap(sInt(uniform_map)).Value(/*"uFogShow"*/ STR(1881))) && DsMap(sInt(uniform_map)).Value(/*"uFogShow"*/ STR(1881)) > -IntType(1))
		{
			BoolType fog = (global::_app->background_fog_show > 0 && global::render_mode != e_render_mode_COLOR);
			render_set_uniform_int(/*"uFogShow"*/ STR(1881), bool_to_float(fog));
			render_set_uniform_color(/*"uFogColor"*/ STR(1882), global::_app->background_fog_object_color_final, IntType(1));
			render_set_uniform(/*"uFogDistance"*/ STR(1883), global::_app->background_fog_distance);
			render_set_uniform(/*"uFogSize"*/ STR(1884), global::_app->background_fog_size);
			render_set_uniform(/*"uFogHeight"*/ STR(1885), global::_app->background_fog_height);
		}
		if (!is_undefined(DsMap(sInt(uniform_map)).Value(/*"uCameraPosition"*/ STR(1886))) && DsMap(sInt(uniform_map)).Value(/*"uCameraPosition"*/ STR(1886)) > -IntType(1))
			render_set_uniform_vec3(/*"uCameraPosition"*/ STR(1886), global::cam_from.Real(X_), global::cam_from.Real(Y_), global::cam_from.Real(Z_));
		if (!is_undefined(DsMap(sInt(uniform_map)).Value(/*"uDefaultEmissive"*/ STR(2780))) && DsMap(sInt(uniform_map)).Value(/*"uDefaultEmissive"*/ STR(2780)) > -IntType(1))
			render_set_uniform(/*"uDefaultEmissive"*/ STR(2780), global::_app->project_render_block_emissive);
		if (!is_undefined(DsMap(sInt(uniform_map)).Value(/*"uDefaultSubsurface"*/ STR(2781))) && DsMap(sInt(uniform_map)).Value(/*"uDefaultSubsurface"*/ STR(2781)) > -IntType(1))
			render_set_uniform(/*"uDefaultSubsurface"*/ STR(2781), global::_app->project_render_block_subsurface);
		if (!is_undefined(DsMap(sInt(uniform_map)).Value(/*"uSSSHighlight"*/ STR(2784))) && DsMap(sInt(uniform_map)).Value(/*"uSSSHighlight"*/ STR(2784)) > -IntType(1))
			render_set_uniform(/*"uSSSHighlight"*/ STR(2784), IntType(1) - global::_app->project_render_subsurface_highlight);
		if (!is_undefined(DsMap(sInt(uniform_map)).Value(/*"uSSSHighlightStrength"*/ STR(2785))) && DsMap(sInt(uniform_map)).Value(/*"uSSSHighlightStrength"*/ STR(2785)) > -IntType(1))
			render_set_uniform(/*"uSSSHighlightStrength"*/ STR(2785), global::_app->project_render_subsurface_highlight_strength);
		render_set_uniform(/*"uMask"*/ STR(2731), bool_to_float(global::shader_mask));
		if (sVar(script) > -IntType(1))
			script_execute(self, { sVar(script) });
	}
	
	void shader_vignette_set()
	{
		render_set_uniform_vec2(/*"uScreenSize"*/ STR(2677), global::render_width, global::render_height);
		render_set_uniform(/*"uRadius"*/ STR(2680), idVar(global::render_camera, value).Value(e_value_CAM_VIGNETTE_RADIUS));
		render_set_uniform(/*"uSoftness"*/ STR(2839), idVar(global::render_camera, value).Value(e_value_CAM_VIGNETTE_SOFTNESS));
		render_set_uniform(/*"uStrength"*/ STR(2786), idVar(global::render_camera, value).Value(e_value_CAM_VIGNETTE_STRENGTH));
		render_set_uniform_color(/*"uColor"*/ STR(2683), idVar(global::render_camera, value).Value(e_value_CAM_VIGNETTE_COLOR), IntType(1));
	}
	
	void shortcut_bar_add(VarType keybind, IntType mouse, StringType text)
	{
		ds_list_add({ global::_app->shortcut_bar_list, ArrType::From({ keybind, mouse, text_get({ /*"shortcut"*/ STR(2841) + text }) }) });
	}
	
	RealType shortcut_bar_draw(ScopeAny self)
	{
		if (!sBool(setting_show_shortcuts_bar))
			return IntType(0);
		sVar(content_x) = IntType(0);
		sVar(content_y) = sReal(window_height) - IntType(28);
		sVar(content_width) = sReal(window_width);
		sVar(content_height) = IntType(28);
		sVar(dx) = sVar(content_x) + IntType(12);
		sVar(dy) = sVar(content_y);
		sVar(dw) = sVar(content_width);
		sVar(dh) = IntType(28);
		draw_box({ sVar(content_x), sVar(content_y), sVar(content_width), sVar(content_height), false, global::c_level_top, IntType(1) });
		draw_divide(sVar(content_x), sVar(content_y), sVar(content_width));
		draw_gradient(sVar(content_x), sVar(content_y) - shadow_size, sVar(content_width), shadow_size, c_black, IntType(0), IntType(0), shadow_alpha, shadow_alpha);
		shortcut_bar_update();
		for (IntType i = IntType(0); i < ds_list_size(sInt(shortcut_bar_list)); i++)
			shortcut_draw(self, DsList(sInt(shortcut_bar_list)).Value(i));
		return 0.0;
	}
	
	void shortcut_bar_update()
	{
		if (global::_app->shortcut_bar_state != global::_app->shortcut_bar_state_prev)
		{
			ds_list_clear(global::_app->shortcut_bar_list);
			if (global::_app->shortcut_bar_state == /*"viewport"*/ STR(118) || global::_app->shortcut_bar_state == /*"viewportcam"*/ STR(2842))
			{
				shortcut_bar_add(null_, e_mouse_CLICK_LEFT, /*"select"*/ STR(2396));
				if (global::_app->shortcut_bar_state == /*"viewport"*/ STR(118))
					shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_VIEW_TIMELINE))->keybind, null_, /*"viewtimeline"*/ STR(2843));
				shortcut_bar_add(null_, e_mouse_DRAG_LEFT, /*"orbit"*/ STR(2264));
				shortcut_bar_add(keybind_new({ null_, false, true, false }), e_mouse_DRAG_LEFT, /*"pan"*/ STR(2844));
				shortcut_bar_add(null_, e_mouse_SCROLL, /*"zoom"*/ STR(2283));
				shortcut_bar_add(null_, e_mouse_DRAG_RIGHT, /*"walk"*/ STR(2845));
			}
			if (global::_app->shortcut_bar_state == /*"cameramove"*/ STR(2846) || global::_app->shortcut_bar_state == /*"tlcameramove"*/ STR(2847))
			{
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_FORWARD))->keybind, null_, /*"forward"*/ STR(1805));
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_LEFT))->keybind, null_, /*"left"*/ STR(188));
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_BACK))->keybind, null_, /*"back"*/ STR(1798));
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_RIGHT))->keybind, null_, /*"right"*/ STR(189));
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_ASCEND))->keybind, null_, /*"ascend"*/ STR(2848));
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_DESCEND))->keybind, null_, /*"descend"*/ STR(2849));
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_FAST))->keybind, null_, /*"faster"*/ STR(2850));
				shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_SLOW))->keybind, null_, /*"slower"*/ STR(2851));
				if (global::_app->shortcut_bar_state == /*"tlcameramove"*/ STR(2847))
				{
					shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_ROLL_FORWARD))->keybind, null_, /*"rollforward"*/ STR(2852));
					shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_ROLL_BACK))->keybind, null_, /*"rollback"*/ STR(2853));
					shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_ROLL_RESET))->keybind, null_, /*"rollreset"*/ STR(2854));
				}
				else
					if (global::_app->window_state != /*"world_import"*/ STR(2657))
						shortcut_bar_add(ObjType(obj_keybind, global::keybinds.Value(e_keybind_CAM_RESET))->keybind, null_, /*"reset"*/ STR(2855));
				
			}
			if (string_contains(global::_app->shortcut_bar_state, /*"timeline"*/ STR(119)))
			{
				if (global::_app->shortcut_bar_state == /*"timelinekeyframes"*/ STR(2856))
				{
					shortcut_bar_add(null_, e_mouse_CLICK_LEFT, /*"tlkeyframeselect"*/ STR(2857));
					shortcut_bar_add(keybind_new({ null_, false, true, false }), e_mouse_CLICK_LEFT, /*"tlkeyframeselectadd"*/ STR(2858));
					shortcut_bar_add(null_, e_mouse_DRAG_LEFT, /*"tlkeyframeselectgroup"*/ STR(2859));
					shortcut_bar_add(keybind_new({ null_, false, true, false }), e_mouse_DRAG_LEFT, /*"tlkeyframeselectgroupadd"*/ STR(2860));
					shortcut_bar_add(keybind_new({ null_, true, false, false }), e_mouse_DRAG_LEFT, /*"tlkeyframedeselectgroup"*/ STR(2861));
				}
				if (global::_app->shortcut_bar_state == /*"timelinenames"*/ STR(2862))
				{
					shortcut_bar_add(null_, e_mouse_CLICK_LEFT, /*"tltimelineselect"*/ STR(2863));
					shortcut_bar_add(keybind_new({ null_, false, true, false }), e_mouse_CLICK_LEFT, /*"tltimelineselectadd"*/ STR(2864));
					shortcut_bar_add(null_, e_mouse_DRAG_LEFT, /*"tltimelineselectgroup"*/ STR(2865));
					shortcut_bar_add(keybind_new({ null_, false, true, false }), e_mouse_DRAG_LEFT, /*"tltimelineselectgroupadd"*/ STR(2866));
					shortcut_bar_add(keybind_new({ null_, true, false, false }), e_mouse_DRAG_LEFT, /*"tltimelinedeselectgroup"*/ STR(2867));
				}
				if (global::_app->shortcut_bar_state == /*"timelinebar"*/ STR(2868))
				{
					shortcut_bar_add(null_, e_mouse_DRAG_LEFT, /*"tlsettime"*/ STR(2869));
					shortcut_bar_add(null_, e_mouse_DRAG_RIGHT, /*"tlsetregion"*/ STR(2870));
				}
				shortcut_bar_add(null_, e_mouse_SCROLL, /*"scrollvertical"*/ STR(2871));
				shortcut_bar_add(keybind_new({ null_, false, true, false }), e_mouse_SCROLL, /*"scrollhorizontal"*/ STR(2872));
				shortcut_bar_add(keybind_new({ null_, true, false, false }), e_mouse_SCROLL, /*"zoom"*/ STR(2283));
			}
			if (global::_app->shortcut_bar_state == /*"worldimport"*/ STR(2873))
			{
				shortcut_bar_add(null_, e_mouse_CLICK_LEFT, /*"worldcreateselection"*/ STR(2874));
				shortcut_bar_add(null_, e_mouse_DRAG_LEFT, /*"orbit"*/ STR(2264));
				shortcut_bar_add(ArrType::From({ null_, false, false, true }), null_, /*"worldignoreselection"*/ STR(2875));
				shortcut_bar_add(keybind_new({ null_, false, true, false }), e_mouse_DRAG_LEFT, /*"pan"*/ STR(2844));
				shortcut_bar_add(null_, e_mouse_SCROLL, /*"zoom"*/ STR(2283));
				shortcut_bar_add(null_, e_mouse_DRAG_RIGHT, /*"walk"*/ STR(2845));
			}
			if (global::_app->shortcut_bar_state == /*"worldimportselection"*/ STR(2876))
			{
				shortcut_bar_add(null_, e_mouse_CLICK_LEFT, /*"worldfinishselection"*/ STR(2877));
				shortcut_bar_add(null_, e_mouse_CLICK_RIGHT, /*"worldclearselection"*/ STR(2878));
			}
		}
		global::_app->shortcut_bar_state_prev = global::_app->shortcut_bar_state;
		global::_app->shortcut_bar_state = /*""*/ STR(0);
	}
	
	void shortcut_draw(ScopeAny self, ArrType shortcut)
	{
		IntType mouse;
		VarType yy;
		RealType padding, imgpadding;
		yy = sVar(dy) + ((RealType)sVar(dh) / 2.0);
		padding = IntType(10);
		imgpadding = IntType(4);
		draw_set_font(sInt(font_label));
		if (shortcut.Value(IntType(0)) != null_)
		{
			ArrType keyboardarray = string_split(text_control_name(shortcut.Value(IntType(0))), /*" + "*/ STR(2879));
			for (IntType i = IntType(0); i < array_length(VarType::CreateRef(keyboardarray)); i++)
			{
				StringType str = string_replace(keyboardarray.Value(i), /*"+ "*/ STR(2880), /*""*/ STR(0));
				IntType stringsize = string_width(str);
				draw_box({ sVar(dx), yy - IntType(8), stringsize + IntType(12), IntType(16), false, global::c_text_tertiary, global::a_text_tertiary });
				draw_box({ sVar(dx) + IntType(2), yy - IntType(6), stringsize + IntType(8), IntType(12), false, global::c_level_top, IntType(1) });
				draw_label(self, { str, sVar(dx) + IntType(6), yy, fa_left, fa_middle, global::c_text_tertiary, global::a_text_tertiary });
				sVar(dx) += (stringsize + IntType(12)) + (i < (array_length(VarType::CreateRef(keyboardarray)) - IntType(1)) ? imgpadding : IntType(0));
			}
			sVar(dx) += (shortcut.Value(IntType(1)) == null_ ? padding : imgpadding);
		}
		if (shortcut.Value(IntType(1)) != null_)
		{
			switch ((IntType)shortcut.Value(IntType(1)))
			{
				case e_mouse_CLICK_LEFT:
				{
					mouse = icons_CLICK_LEFT;
					break;
				}
				case e_mouse_CLICK_MIDDLE:
				{
					mouse = icons_CLICK_MIDDLE;
					break;
				}
				case e_mouse_CLICK_RIGHT:
				{
					mouse = icons_CLICK_RIGHT;
					break;
				}
				case e_mouse_DRAG_LEFT:
				{
					mouse = icons_DRAG_LEFT;
					break;
				}
				case e_mouse_DRAG_MIDDLE:
				{
					mouse = icons_DRAG_MIDDLE;
					break;
				}
				case e_mouse_DRAG_RIGHT:
				{
					mouse = icons_DRAG_RIGHT;
					break;
				}
				case e_mouse_SCROLL:
				{
					mouse = icons_SCROLL;
					break;
				}
				default:
					mouse = icons_HELP;
			}
			
			draw_image({ ID_spr_icons, mouse, sVar(dx) + IntType(10), yy, IntType(1), IntType(1), global::c_text_tertiary, global::a_text_tertiary });
			sVar(dx) += IntType(20) + padding;
		}
		draw_set_font(sInt(font_value));
		draw_label(self, { shortcut.Value(IntType(2)), sVar(dx), yy, fa_left, fa_middle, global::c_text_secondary, global::a_text_secondary });
		sVar(dx) += string_width(shortcut.Value(IntType(2))) + IntType(36);
	}
	
	VarType simplex_lib(VarArgs argument)
	{
		IntType argument_count = argument.Size();
		if (argument_count > IntType(3))
			return lib_math_simplex4d(argument[IntType(0)], argument[IntType(1)], argument[IntType(2)], argument[IntType(3)]);
		if (argument_count > IntType(2))
			return lib_math_simplex3d(argument[IntType(0)], argument[IntType(1)], argument[IntType(2)]);
		if (argument_count > IntType(1))
			return lib_math_simplex2d(argument[IntType(0)], argument[IntType(1)]);
		return lib_math_simplex1d(argument[IntType(0)]);
	}
	
	RealType smoothstep(RealType xx)
	{
		return (xx * xx * (IntType(3) - IntType(2) * xx));
	}
	
	VarType snap(VarType val, VarType xx)
	{
		if (xx == IntType(0))
			return val;
		return round((RealType)val / xx) * xx;
	}
	
	void sortlist_add(IntType sortlist, VarType value, IntType index)
	{
		if (index >= IntType(0))
		{
			ds_list_insert(idInt(sortlist, list), index, value);
			ds_list_insert(idInt(sortlist, display_list), index, value);
		}
		else
		{
			ds_list_add({ idInt(sortlist, list), value });
			ds_list_add({ idInt(sortlist, display_list), value });
		}
		
	}
	
	void sortlist_clear(IntType slist)
	{
		ObjType(obj_sortlist, slist)->select = null_;
		ds_list_clear(ObjType(obj_sortlist, slist)->list);
		ds_list_clear(ObjType(obj_sortlist, slist)->display_list);
		ObjType(obj_sortlist, slist)->search = false;
		ObjType(obj_sortlist, slist)->column_sort = null_;
	}
	
	void sortlist_column_add(IntType slist, StringType name, RealType xx)
	{
		idArr(slist, column_name)[idInt(slist, columns)] = name;
		idArr(slist, column_x)[idInt(slist, columns)] = xx;
		idArr(slist, column_w)[idInt(slist, columns)] = IntType(0);
		idInt(slist, columns)++;
	}
	
	VarType sortlist_column_get(VarType slist, VarType value, IntType col)
	{
		switch (StringType(idArr(slist, column_name).Value(col)).id)
		{
			case 206: // libname
			{
				if (dev_mode_debug_saveid)
					return string_remove_newline(idVar(value, display_name)) + /*" ["*/ STR(1759) + string(idVar(value, save_id)) + /*"]"*/ STR(1201);
				return string_remove_newline(idVar(value, display_name));
			}
			case 207: // libtype
			{
				return text_get({ /*"type"*/ STR(772) + DsList(global::temp_type_name_list).Value(idVar(value, type)) });
			}
			case 208: // libinstances
			{
				return idInt(value, count);
			}
			case 179: // charname
			case 181: // spblockname
			case 182: // bodypartmodelname
			{
				return minecraft_asset_get_name(/*"model"*/ STR(514), ObjType(obj_model, DsMap(ObjType(obj_minecraft_assets, global::mc_assets)->model_name_map).Value(value))->name);
			}
			case 180: // blockname
			{
				return minecraft_asset_get_name(/*"block"*/ STR(507), ObjType(obj_block, DsMap(ObjType(obj_minecraft_assets, global::mc_assets)->block_name_map).Value(value))->name);
			}
			case 2881: // blockfilter
			{
				return minecraft_asset_get_name(/*"block"*/ STR(507), ObjType(obj_block, DsList(ObjType(obj_minecraft_assets, global::mc_assets)->block_list).Value(value))->name);
			}
			case 216: // particleeditortypename
			{
				if (dev_mode_debug_saveid)
					return string_remove_newline(idVar(value, name)) + /*" ["*/ STR(1759) + string(idVar(value, save_id)) + /*"]"*/ STR(1201);
				return string_remove_newline(idVar(value, name));
			}
			case 217: // particleeditortypekind
			{
				if (idVar(value, temp) == particle_sheet)
					return text_get({ /*"particleeditortypespritesheet"*/ STR(1327) });
				else
					if (idVar(value, temp) == particle_template)
						return text_get({ /*"particleeditortypetemplate"*/ STR(1326) });
					else
						return string_remove_newline(idVar(idVar(value, temp), display_name));
				
				
			}
			case 218: // particleeditortyperate
			{
				return string(floor(idVar(value, spawn_rate) * IntType(100))) + /*"%"*/ STR(204);
			}
			case 213: // resname
			{
				if (dev_mode_debug_saveid)
					return string_remove_newline(idVar(value, display_name)) + /*" ["*/ STR(1759) + string(idVar(value, save_id)) + /*"]"*/ STR(1201);
				return string_remove_newline(idVar(value, display_name));
			}
			case 2882: // resfilename
			{
				return string_remove_newline(idVar(value, filename));
			}
			case 214: // restype
			{
				return text_get({ /*"type"*/ STR(772) + DsList(global::res_type_name_list).Value(idVar(value, type)) });
			}
			case 215: // rescount
			{
				return idInt(value, count);
			}
			case 183: // particlepresetname
			{
				VarType fn = filename_new_ext(filename_name(value), /*""*/ STR(0));
				return text_exists(/*"particle"*/ STR(2883) + fn) ? text_get({ /*"particle"*/ STR(2883) + fn }) : fn;
			}
			
		}
		
		return VarType();
	}
	
	RealType sortlist_draw(ScopeAny self, VarArgs argument)
	{
		IntType argument_count = argument.Size();
		VarType slist, xx, yy, w, h, select, filter, name;
		BoolType colmouseon;
		VarType searchx, searchw, dy;
		RealType itemh, colsh;
		slist = argument[IntType(0)];
		xx = argument[IntType(1)];
		yy = argument[IntType(2)];
		w = argument[IntType(3)];
		h = argument[IntType(4)];
		select = argument[IntType(5)];
		if (argument_count > IntType(6))
			filter = argument[IntType(6)];
		else
			filter = true;
		
		if (argument_count > IntType(7))
			name = argument[IntType(7)];
		else
			name = /*""*/ STR(0);
		
		if (xx + w < sVar(content_x) || xx > sVar(content_x) + sVar(content_width) || yy + h < sVar(content_y) || yy > sVar(content_y) + sVar(content_height))
		{
			if (sBool(textbox_jump))
				ds_list_add({ sInt(textbox_list), ArrType::From({ idInt(slist, search_tbx), sVar(content_tab), yy, sVar(content_y), sVar(content_height) }) });
			return IntType(0);
		}
		searchx = xx;
		searchw = w;
		itemh = sReal(ui_small_height);
		colsh = sReal(ui_small_height);
		if (filter > 0 && name == /*""*/ STR(0))
		{
			if (draw_button_icon(self, { /*"listfilter"*/ STR(2884) + string(slist), xx, yy, IntType(24), IntType(24), !ds_list_empty(idInt(slist, filter_list)), icons_FILTER, null_, false, /*"tooltipfilterlist"*/ STR(2885) }))
			{
				menu_settings_set(self, xx, yy, /*"listfilter"*/ STR(2884) + string(slist), IntType(24));
				sInt(settings_menu_script) = ID_sortlist_filters_draw;
				sVar(settings_menu_sortlist) = slist;
				sVar(settings_menu_h_max) = IntType(256);
			}
			if ((sStr(settings_menu_name) == /*"listfilter"*/ STR(2884) + string(slist)) && sStr(settings_menu_ani_type) != /*"hide"*/ STR(718))
				ObjType(value_animation, ObjType(micro_animation, global::current_microani)->active)->value = true;
			searchx += IntType(32);
			searchw -= 32.0;
		}
		if (name != /*""*/ STR(0))
		{
			draw_set_font(sInt(font_label));
			draw_label(self, { string_limit({ name, w - IntType(144) }), xx, yy + IntType(12), fa_left, fa_middle, global::c_text_secondary, global::a_text_secondary });
			searchx += (w - IntType(144));
			searchw -= (w - IntType(144));
		}
		if (draw_textfield(self, { /*"listsearch"*/ STR(2886) + string(slist), searchx, yy, searchw, IntType(24), idInt(slist, search_tbx), null_, text_get({ /*"listsearch"*/ STR(2886) }), /*"none"*/ STR(874) }))
		{
			idBool(slist, search) = (ObjType(obj_textbox, idInt(slist, search_tbx))->text != /*""*/ STR(0));
			sortlist_update(self, slist);
		}
		h -= 32.0;
		yy += IntType(32);
		if (h < colsh)
			return IntType(0);
		colmouseon = app_mouse_box(self, xx, yy, w, colsh) && sBool(content_mouseon);
		if (sVar(window_busy) == /*"sortlist_resize"*/ STR(2887) && sVar(sortlist_resize) == slist)
		{
			idArr(slist, column_x)[sInt(sortlist_resize_column)] = sReal(sortlist_resize_column_x) + (gmlGlobal::mouse_x - sInt(mouse_click_x)) / w;
			idArr(slist, column_x)[sInt(sortlist_resize_column)] = clamp(IntType(0), idArr(slist, column_x).Value(sInt(sortlist_resize_column)), 0.9);
			if (sInt(sortlist_resize_column) > IntType(0))
				idArr(slist, column_x)[sInt(sortlist_resize_column)] = max({ idArr(slist, column_x).Value(sInt(sortlist_resize_column)), idArr(slist, column_x).Value(sInt(sortlist_resize_column) - IntType(1)) + 0.1 });
			if (sInt(sortlist_resize_column) < idInt(slist, columns) - IntType(1))
				idArr(slist, column_x)[sInt(sortlist_resize_column)] = min({ idArr(slist, column_x).Value(sInt(sortlist_resize_column)), idArr(slist, column_x).Value(sInt(sortlist_resize_column) + IntType(1)) - 0.1 });
			sInt(mouse_cursor) = cr_size_we;
			if (!sBool(mouse_left))
			{
				sVar(window_busy) = /*""*/ STR(0);
				app_mouse_clear(self);
			}
		}
		for (IntType c = IntType(0); c < idInt(slist, columns); c++)
		{
			RealType dx;
			IntType icon;
			dx = floor(idArr(slist, column_x).Value(c) * w);
			if (c == idInt(slist, columns) - IntType(1))
				idArr(slist, column_w)[c] = ceil(w - dx);
			else
				idArr(slist, column_w)[c] = ceil(idArr(slist, column_x).Value(c + IntType(1)) * w) - dx;
			
			if (c > IntType(0) && app_mouse_box(self, xx + dx - IntType(5), yy, IntType(10), colsh) && sBool(content_mouseon))
			{
				sInt(mouse_cursor) = cr_size_we;
				if (sBool(mouse_left_pressed))
				{
					sVar(sortlist_resize) = slist;
					sInt(sortlist_resize_column) = c;
					sReal(sortlist_resize_column_x) = idArr(slist, column_x).Value(c);
					sVar(window_busy) = /*"sortlist_resize"*/ STR(2887);
				}
			}
			icon = null_;
			if (idInt(slist, column_sort) == c)
				icon = ((idReal(slist, sort_asc) > 0) ? icons_SORT_UP : icons_SORT_DOWN);
			if (sortlist_draw_button(self, /*"column"*/ STR(2888) + idArr(slist, column_name).Value(c), xx + dx, yy + IntType(4), idArr(slist, column_w).Value(c), colsh, idInt(slist, column_sort) == c, icon, (c == IntType(0)), (c == idInt(slist, columns) - IntType(1)), colmouseon))
			{
				if (idInt(slist, column_sort) == c)
				{
					if (idReal(slist, sort_asc) > 0)
					{
						idInt(slist, column_sort) = null_;
						idReal(slist, sort_asc) = false;
					}
					else
						idReal(slist, sort_asc) = true;
					
				}
				else
					idInt(slist, column_sort) = c;
				
				sortlist_update(self, slist);
			}
		}
		dy = (yy + colsh) + IntType(10);
		draw_divide(xx + IntType(1), dy - IntType(3), w - IntType(2));
		if (sVar(window_focus) == string(idInt(slist, scroll)))
		{
			draw_outline({ xx, yy, w, h, IntType(1), global::c_accent, IntType(1), true });
			sStr(window_scroll_focus) = string(idInt(slist, scroll));
			if (!app_mouse_box(self, xx, yy, w, h) && sBool(content_mouseon) && sBool(mouse_left) && sVar(window_busy) != /*"scrollbar"*/ STR(2557))
				sVar(window_focus) = /*""*/ STR(0);
		}
		else
			draw_outline({ xx, yy, w, h, IntType(1), global::c_border, global::a_border, true });
		
		draw_set_font(sInt(font_value));
		for (RealType i = round((RealType)ObjType(obj_scrollbar, idInt(slist, scroll))->value / itemh); i < ds_list_size(idInt(slist, display_list)); i++)
		{
			if (dy + itemh > yy + h)
				break;
			VarType value;
			RealType dw, selected;
			BoolType mouseon;
			value = DsList(idInt(slist, display_list)).Value(i);
			dw = w - IntType(12) * (IntType)ObjType(obj_scrollbar, idInt(slist, scroll))->needed;
			selected = (select == value);
			mouseon = (app_mouse_box(self, xx, dy, dw, itemh) && sBool(content_mouseon));
			if (selected > 0 || mouseon && sBool(mouse_left))
			{
				draw_box({ xx, dy, dw, itemh, false, global::c_accent_overlay, global::a_accent_overlay });
				if (mouseon && sBool(mouse_left))
					draw_box_hover({ xx, dy, dw, itemh, IntType(1) });
			}
			else
				if (mouseon)
					draw_box({ xx, dy, dw, itemh, false, global::c_overlay, global::a_overlay });
			
			for (IntType c = IntType(0); c < idInt(slist, columns); c++)
			{
				VarType dx, text;
				RealType wid, islast;
				dx = xx + floor(idArr(slist, column_x).Value(c) * w) + IntType(8);
				wid = idArr(slist, column_w).Value(c) - IntType(8);
				if (c == idInt(slist, columns) - IntType(1) && ObjType(obj_scrollbar, idInt(slist, scroll))->needed)
					wid -= 12.0;
				islast = (c == idInt(slist, columns) - IntType(1)) && (c != IntType(0));
				text = string_limit({ string(sortlist_column_get(slist, value, c)), wid });
				draw_label(self, { text, dx + ((wid - IntType(8)) * islast), dy + itemh / 2.0, (islast > 0) ? fa_right : fa_left, fa_middle, (selected > 0) ? global::c_accent : global::c_text_main, (selected > 0) ? 1.0 : global::a_text_main });
			}
			if (mouseon)
			{
				sInt(mouse_cursor) = cr_handpoint;
				if (sBool(mouse_left_released))
				{
					if (idBool(slist, can_deselect) && selected > 0)
						script_execute(self, { idVar(slist, script), null_ });
					else
						script_execute(self, { idVar(slist, script), value });
					
					app_mouse_clear(self);
					if (ObjType(obj_scrollbar, idInt(slist, scroll))->needed)
						sVar(window_focus) = string(idInt(slist, scroll));
				}
			}
			dy += itemh;
		}
		ObjType(obj_scrollbar, idInt(slist, scroll))->snap_value = itemh;
		scrollbar_draw(self, idInt(slist, scroll), e_scroll_VERTICAL, xx + w - IntType(12), yy + (colsh + IntType(10)), floor((h - (colsh + IntType(10))) / itemh) * itemh, ds_list_size(idInt(slist, display_list)) * itemh);
		return 0.0;
	}
	
}
